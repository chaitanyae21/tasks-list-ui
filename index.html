<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tasks List UI</title>
    <!-- Load React and ReactDOM from a CDN. In a production setting these would be bundled -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 1rem;
        background: #f5f5f5;
      }
      h1 {
        text-align: center;
        color: #333;
      }
      .task-list {
        max-width: 800px;
        margin: 0 auto;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }
      .task-item {
        display: flex;
        align-items: center;
        padding: 1rem;
        border-bottom: 1px solid #e5e5e5;
      }
      .task-item:last-child {
        border-bottom: none;
      }
      .avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        margin-right: 1rem;
      }
      .task-content {
        flex: 1;
      }
      .task-title {
        margin: 0;
        font-size: 1.1rem;
        font-weight: bold;
      }
      .task-labels {
        margin-top: 0.25rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.25rem;
      }
      .label {
        padding: 0.15rem 0.5rem;
        border-radius: 4px;
        font-size: 0.75rem;
        color: white;
      }
      select {
        padding: 0.25rem;
        border-radius: 4px;
        border: 1px solid #ccc;
      }
    </style>
  </head>
  <body>
    <h1>Tasks List</h1>
    <div id="root"></div>
    <script>
      // Simulated REST endpoints data. In a real app these would be fetched via HTTP calls.
      const TASKS_ENDPOINT = [
        { id: 1, title: "Buy groceries", status: "todo", assigneeId: 1, labelIds: [1] },
        { id: 2, title: "Fix login bug", status: "in-progress", assigneeId: 2, labelIds: [2, 3] },
        { id: 3, title: "Write meeting notes", status: "done", assigneeId: 3, labelIds: [] },
      ];
      const ASSIGNEES_ENDPOINT = [
        { id: 1, name: "Alice", avatar: "https://i.pravatar.cc/150?img=1" },
        { id: 2, name: "Bob", avatar: "https://i.pravatar.cc/150?img=2" },
        { id: 3, name: "Charlie", avatar: "https://i.pravatar.cc/150?img=3" },
      ];
      const LABELS_ENDPOINT = [
        { id: 1, name: "Personal", color: "#3b82f6" },
        { id: 2, name: "Bug", color: "#ef4444" },
        { id: 3, name: "Feature", color: "#10b981" },
      ];

      // Utility functions to mimic asynchronous API calls
      const fetchTasks = () => new Promise((resolve) => setTimeout(() => resolve(TASKS_ENDPOINT.slice()), 100));
      const fetchAssignees = () => new Promise((resolve) => setTimeout(() => resolve(ASSIGNEES_ENDPOINT.slice()), 100));
      const fetchLabels = () => new Promise((resolve) => setTimeout(() => resolve(LABELS_ENDPOINT.slice()), 100));

      // React components without JSX using React.createElement
      function TaskList() {
        const [tasks, setTasks] = React.useState([]);
        const [assignees, setAssignees] = React.useState([]);
        const [labels, setLabels] = React.useState([]);
        const [loading, setLoading] = React.useState(true);

        React.useEffect(() => {
          async function load() {
            const [ts, as, ls] = await Promise.all([fetchTasks(), fetchAssignees(), fetchLabels()]);
            setTasks(ts);
            setAssignees(as);
            setLabels(ls);
            setLoading(false);
          }
          load();
        }, []);

        const updateStatus = (id, newStatus) => {
          setTasks((prev) => prev.map((t) => (t.id === id ? Object.assign({}, t, { status: newStatus }) : t)));
        };

        const getAssignee = (id) => assignees.find((a) => a.id === id);
        const getLabels = (ids) => labels.filter((l) => ids.includes(l.id));

        if (loading) {
          return React.createElement('p', null, 'Loading tasks...');
        }

        return React.createElement(
          'div',
          { className: 'task-list' },
          tasks.map((task) => {
            const assignee = getAssignee(task.assigneeId);
            const taskLabels = getLabels(task.labelIds);
            return React.createElement(
              'div',
              { key: task.id, className: 'task-item' },
              React.createElement('img', {
                className: 'avatar',
                src: (assignee && assignee.avatar) || 'https://via.placeholder.com/40',
                alt: assignee ? assignee.name : 'Assignee',
              }),
              React.createElement(
                'div',
                { className: 'task-content' },
                React.createElement('p', { className: 'task-title' }, task.title),
                React.createElement(
                  'div',
                  { className: 'task-labels' },
                  taskLabels.map((label) =>
                    React.createElement(
                      'span',
                      {
                        key: label.id,
                        className: 'label',
                        style: { backgroundColor: label.color },
                      },
                      label.name
                    )
                  )
                )
              ),
              React.createElement(
                'select',
                {
                  value: task.status,
                  onChange: (e) => updateStatus(task.id, e.target.value),
                },
                React.createElement('option', { value: 'todo' }, 'To Do'),
                React.createElement('option', { value: 'in-progress' }, 'In Progress'),
                React.createElement('option', { value: 'done' }, 'Done')
              )
            );
          })
        );
      }

      function App() {
        return React.createElement(TaskList, null);
      }

      // Wait until React is loaded on the page, then mount the app
      (function mountWhenReady() {
        if (typeof React !== 'undefined' && typeof ReactDOM !== 'undefined') {
          const container = document.getElementById('root');
          const root = ReactDOM.createRoot(container);
          root.render(React.createElement(App, null));
        } else {
          setTimeout(mountWhenReady, 50);
        }
      })();
    </script>
  </body>
</html>